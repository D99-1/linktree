<!DOCTYPE html>
<html>    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>My Links</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">           
    </head>
    <body>
        <link rel="stylesheet" href="./style.css">




        <!-- Logo -->
        <img class="logo" id="IMG" />
        <h1><pre id="USR"></pre><h1>
        <!-- Featured -->
     <!--   <h2>Featured</h2> 
        <a class="featured" href="">Featured Link 1</a> -->

        <!-- Popular Content -->
        <h2>Check Out These Links</h2>
<!-- The 3 links as of now -  yet to add support for more or less links as selected in linkMaker.html-->
        <a id="L1" target="_blank"><pre id="T1"></pre></a>
        <a id="L2" target="_blank"><pre id="T2"></pre></a>
        <a id="L3" target="_blank"><pre id="T3"></pre></a>

        <!-- Channels -->

        <div class="channels">
This Linksite was made using ....<!-- name depends on future domain name-->
        </div>
        <script>
     var docURL = window.location.href,

  params = [];
  
docURL = docURL.replace(window.location.origin, '');

// grabbing the parameters part of the URL
if (docURL.indexOf('/#/') > -1) {
  docURL = docURL.split('/#/')[1];
  if (docURL != '') {

    if (docURL[docURL.length - 1] == '%23') {
      docURL = docURL.substring(0, docURL.length - 1);
    }

    // split the URL final string to get an object with all params 
    params = docURL.split('%23');
    console.log(params);
  }
} else {
  console.log('No URL parameters found');
}
// decodes the urls
const paramlinks = [params[1],params[3],params[5],params[7]]
console.log(decodeURIComponent(paramlinks))
const decodedparamlinks = decodeURIComponent(paramlinks)
const plusprotection = decodedparamlinks.toString().replace(/\+/g," ")
console.log(plusprotection)
const spacedparamlinks = plusprotection.toString().replace(/ /g, "%20");
console.log(spacedparamlinks)
finalparamlinks = spacedparamlinks.split(',')
console.log(finalparamlinks)

//decodes the link names
const names = [params[0],params[2],params[4],params[6]]
const decodedNames = decodeURIComponent(names)
const namesPlusprotection = decodedNames.toString().replace(/\+/g," ")
const decodedNamesArray = namesPlusprotection.split(',')
console.log(decodedNamesArray)


//gets objects from url params and sends to be used in html 
      document.querySelector('IMG').src = finalparamlinks[0];
      document.getElementById("USR").innerHTML = decodedNamesArray[0];
      document.getElementById("T1").innerHTML = decodedNamesArray[1];
      document.getElementById("L1").setAttribute("href",finalparamlinks[1]);
      document.getElementById("T2").innerHTML = decodedNamesArray[2];
      document.getElementById("L2").setAttribute("href",finalparamlinks[2]);
      document.getElementById("T3").innerHTML = decodedNamesArray[3];
      document.getElementById("L3").setAttribute("href",finalparamlinks[3]);
          
  
    </script>
    </body>

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Linker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="icon" href="data:,">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.min.css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,300'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:400,700,300'>
<script src="https://www.google.com/recaptcha/api.js?onload=recaptchaOnLoad&render=explicit" async defer></script>
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css'><link rel="stylesheet" href="./maker.css">
</head>
<body>
<!-- partial:index.partial.html -->
  <div class="full">
<div class="signup__container">
  <div class="container__child signup__thumbnail">
    <div class="thumbnail__logo">
      
      <h1 class="logo__text">Linker</h1>
    </div>
    <div class="thumbnail__content text-center">
      <h1 class="heading--primary">One Link To Replace Them All</h1>
      <h2 class="heading--secondary">Create Yours Today</h2>
    </div>

<!--<input class="codeInput" type="text" id="codeInputID" placeholder="https://d99-1.github.io/linktree" readonly/> -->
<h1 class="codeInput" id="codeInputID"><pre id="fullLink"></pre></h1>

    <!---
    <div class="thumbnail__links">
      <ul class="list-inline m-b-0 text-center">
        <li><a href="http://alexdevero.com/" target="_blank"><i class="fa fa-globe"></i></a></li>
        <li><a href="https://www.behance.net/alexdevero" target="_blank"><fa class="fa fa-behance"></fa></a></li>
        <li><a href="https://github.com/alexdevero" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a href="https://twitter.com/alexdevero" target="_blank"><i class="fa fa-twitter"></i></a></li>
      </ul>
    </div>
--->
    <div class="signup__overlay"></div>
  </div>
  <div class="container__child signup__form">
    <form action="#" id="createLinkForm">
      <div class="form-group">
        <label for="url">Profile Picture Url</label>
        <input class="form-control" type="url" name="pfp" id="pfp" placeholder="https://.../MyProfilePicture.png" required title="The URL must begin with https://"/>
      </div>
      <div class="form-group">
        <label for="username">Username</label>
        <input class="form-control" type="text" name="username" id="username" placeholder="@Dhyan99" required />
      </div>
            <div class="form-group">
        <label for="title">Link 1 Title</label>
        <input class="form-control" type="text" name="link1title" id="link1title" placeholder="Youtube" required />
      </div>
      <div class="form-group">
        <label for="url">Link 1 URL</label>
        <input class="form-control" type="url" name="link1" id="link1" placeholder="https://youtube.com" required title="The URL must begin with https://"/>
      </div>
      <div class="form-group">
        <label for="title">Link 2 Title</label>
        <input class="form-control" type="text" name="link2title" id="link2title" placeholder="Github" required />
      </div>
      <div class="form-group">
        <label for="url">Link 2 URL</label>
        <input class="form-control" type="url" name="link2" id="link2" placeholder="https://www.github.com" required title="The URL must begin with https://"/>
      </div>
      <div class="form-group">
        <label for="title">Link 3 Title</label>
        <input class="form-control" type="text" name="link3title" id="link3title" placeholder="Stack Overflow" required />
      </div>
      <div class="form-group">
        <label for="url">Link 3 URL</label>
        <input class="form-control" type="url" name="link3" id="link3" placeholder="https://stackoverflow.com" required title="The URL must begin with https://"/>
      </div>
      <div class="m-t-lg">
        <ul class="list-inline">
          <div class="g-recaptcha form-field"><div style="width: 304px; height: 78px;">
            <div>
              <iframe title="reCAPTCHA" src="https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6Ld90xIiAAAAAJTxjtxH8UBM-GPY-oQK6OclXKej&amp;co=aHR0cHM6Ly9yZWNhcHRjaGEtZGVtby5hcHBzcG90LmNvbTo0NDM.&amp;hl=en&amp;v=zmiYzsHi8INTJBWt2QZC9aM5&amp;size=normal&amp;cb=hasvmjajry19" width="304" height="78" role="presentation" name="a-xlewcp5civ19" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox">
              </iframe>
            </div>
            <textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;">
            </textarea>
          </div>
          <iframe style="display: none;">
            </iframe>
        </div>
            <button class="btn btn--form" id="doneBTN" type="submit" >Create My Link</button>
          </li>
        </ul>
      </div>
    </form>  
    <script type="text/javascript">
      var onloadCallback = function() {
          var captchaContainer = document.querySelector('.g-recaptcha');
          grecaptcha.render(captchaContainer, {
            'sitekey' : '6Ld90xIiAAAAAJTxjtxH8UBM-GPY-oQK6OclXKej'
          });
          document.querySelector('button[type="submit"]').disabled = false;
      };
      </script>
  </div>
</div>
  </div>   
<!-- partial -->
<script>

 function GetURLParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
  }
  var pfp = GetURLParameter('pfp')
  var username = GetURLParameter('username')
  var link1title = GetURLParameter('link1title')
  var link1 = GetURLParameter('link1')
  var link2title = GetURLParameter('link2title')
  var link2 = GetURLParameter('link2')
  var link3title = GetURLParameter('link3title')
  var link3 = GetURLParameter('link3')
  
  var postReq = "https://d99-1.github.io/linktree/#/"+username+"#"+pfp+"#"+link1title+"#"+link1+"#"+link2title+"#"+link2+"#"+link3title+"#"+link3
  var full = null

  
    var xhr = new XMLHttpRequest();
  if(pfp != null){
xhr.open("POST", "https://d99-url-shortener-api.herokuapp.com/api/url/shortOnly", true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.send(JSON.stringify({
    "fullUrl": postReq
}));}
 async function getRes(){
xhr.onload = function() {
  var res = JSON.parse(this.responseText);
  console.log(res)
  full = "res.toString()"
      console.log("full:" + full)

}}
    function myDisplayer(some) {
    console.log("displayer"+full)
  document.getElementById("fullLink").innerHTML = some;
}
  getRes().then(myDisplayer(full))
</script>
</body>
</html>
